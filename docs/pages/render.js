import{colors}from"./colors";import{resize_square,stroke_circle,stroke_circle_2,fill_circle_2,clear,line,fill_text}from"./canvas";import{wrap_around,delta,add,mul,del}from"./math";const render_skeleton=(l,e,r,o,d,i)=>{clear(l);for(let r of e)r.deleted||(r.activated&&"booster"==r.kind?(fill_circle_2(l,add(r.p,mul(r.direction,.007+.003*Math.random())),.7*r.d,colors[r.kind].value_3),fill_circle_2(l,add(r.p,mul(r.direction,.005+.001*Math.random())),.9*r.d,colors[r.kind].value_2),fill_circle_2(l,r.p,r.d,colors[r.kind].value_1)):"booster"==r.kind?fill_circle_2(l,r.p,.75*r.d,colors[r.kind].value):fill_circle_2(l,r.p,.75*r.d,colors[r.kind].value[r.player_id]),r.binding&&fill_text(l,r.p,r.binding,20,"#222"));for(let e of r)stroke_circle_2(l,e.p,.75*e.d,colors[e.kind].value[e.player_id]);for(let e of o)stroke_circle_2(l,e.p,.75*e.d,colors[e.kind].value[e.player_id]);stroke_circle_2(l,d,.01,"#222"),stroke_circle_2(l,d,.013,"#ffa");for(let e of i)e.deleted||fill_circle_2(l,e.p,.75*e.d,"#8e8")},render=(l,e,r)=>{for(let r of e)r.deleted||(r.activated&&"booster"==r.kind?(fill_circle_2(l,add(r.p,mul(r.direction,.007+.003*Math.random())),.7*r.d,colors[r.kind].value_3),fill_circle_2(l,add(r.p,mul(r.direction,.005+.001*Math.random())),.9*r.d,colors[r.kind].value_2),fill_circle_2(l,r.p,r.d,colors[r.kind].value_1)):"booster"==r.kind?fill_circle_2(l,r.p,r.d,colors[r.kind].value):fill_circle_2(l,r.p,r.d,colors[r.kind].value[r.player_id]));for(let o of Object.keys(colors))for(let d of r){if(d.deleted)continue;const r=e[d.a],i=e[d.b],c=wrap_around(r.np,i.np),_=mul(delta(c.a,c.b),.5),a=colors[r.kind].score>colors[i.kind].score?r.kind:i.kind;if(o==a){const e=colors[a].value[i.player_id],o=.75;fill_circle_2(l,add(r.p,_),r.d*o,e),fill_circle_2(l,del(i.p,_),i.d*o,e)}}for(let l of r){const r=e[l.a],o=e[l.b],d=wrap_around(r.np,o.np);delta(d.a,d.b)}for(let l of e);};export{render,render_skeleton};